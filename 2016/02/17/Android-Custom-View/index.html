<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Android Custom View  | liuWeiQi blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Android Custom View/Users/weiqiliu/.nvm/versions/node/v5.0.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin很多时候系统提供的原生组件不能满足或者完美的满足我们应用的需求。这时我们就需要在现有的组件上改进，或者直接继承自底层的view来绘制符合自身需求的component。    在这里要">
<meta property="og:type" content="article">
<meta property="og:title" content="Android Custom View ">
<meta property="og:url" content="http://yoursite.com/2016/02/17/Android-Custom-View/index.html">
<meta property="og:site_name" content="liuWeiQi blog">
<meta property="og:description" content="Android Custom View/Users/weiqiliu/.nvm/versions/node/v5.0.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin很多时候系统提供的原生组件不能满足或者完美的满足我们应用的需求。这时我们就需要在现有的组件上改进，或者直接继承自底层的view来绘制符合自身需求的component。    在这里要">
<meta property="og:updated_time" content="2016-02-17T09:59:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android Custom View ">
<meta name="twitter:description" content="Android Custom View/Users/weiqiliu/.nvm/versions/node/v5.0.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin很多时候系统提供的原生组件不能满足或者完美的满足我们应用的需求。这时我们就需要在现有的组件上改进，或者直接继承自底层的view来绘制符合自身需求的component。    在这里要">
  
    <link rel="alternative" href="/atom.xml" title="liuWeiQi blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">liuWeiQi blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Android-Custom-View" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/17/Android-Custom-View/" class="article-date">
  <time datetime="2016-02-17T09:58:19.000Z" itemprop="datePublished">2016-02-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android Custom View 
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Android-Custom-View"><a href="#Android-Custom-View" class="headerlink" title="Android Custom View"></a>Android Custom View</h2><p>/Users/weiqiliu/.nvm/versions/node/v5.0.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin<br>很多时候系统提供的原生组件不能满足或者完美的满足我们应用的需求。这时我们就需要在现有的组件上改进，或者直接继承自底层的view来绘制符合自身需求的component。<br>    在这里要介绍的就是自定义view中，我们会遇到最重要的三个方法。<font color="red" size="3px">OnMeasure()</font>，<font color="red" size="3px">OnLayout() </font>，<font color="red" size="3px">OnDraw()</font>。OnLayout决定了在ViewGroup中的位置。OnDraw决定了如何绘制这个view。OnMeasure决定了View的大小。<br>    如果要在xml文件里，自定义设置自己的属性来控制组件的某些特征。一般需要在组件初始化方法内，把这些自定义属性取出来以备后用。来看总体看一下这个构造方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">DrawView</span><span class="params">(Context context, AttributeSet attrs)</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">DrawView</span><span class="params">(Context context)</span></span><br><span class="line">  </span>&#123;ß</span><br><span class="line">      <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">DrawView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">      <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">      init(context, attrs, defStyleAttr);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyle)</span> </span>&#123;</span><br><span class="line">      <span class="comment">/**</span><br><span class="line">       * 获得我们所定义的自定义样式属性</span><br><span class="line">       */</span></span><br><span class="line">      TypedArray typedArray = context.getTheme().obtainStyledAttributes(attrs, R.styleable.DrawView, defStyle, <span class="number">0</span>);</span><br><span class="line">      <span class="keyword">int</span> n = typedArray.getIndexCount();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">int</span> attr = typedArray.getIndex(i);</span><br><span class="line">          <span class="keyword">switch</span> (attr)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">case</span> R.styleable.DrawView_backgroudColor:</span><br><span class="line">                  backgroundColor = typedArray.getColor(attr, Color.BLACK);</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">              <span class="keyword">case</span> R.styleable.DrawView_radius:</span><br><span class="line">                  mRadius= typedArray.getDimensionPixelSize(attr, (<span class="keyword">int</span>) TypedValue.applyDimension(</span><br><span class="line">                          TypedValue.COMPLEX_UNIT_DIP, <span class="number">16</span>, getResources().getDisplayMetrics()));</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      typedArray.recycle();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>obtainStyledAttributes()方法从我们的xml中取出我们在attrs中自定义的属性值，把他放在TypedArray中。 那再来看看attrs中的代码,14到17行就是我们自定义的属性名和对应的格式。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line">&lt;resources&gt;</span><br><span class="line"></span><br><span class="line">    &lt;declare-styleable name="MultiLineRadioGroup"&gt;</span><br><span class="line">        &lt;attr name="child_margin_horizontal" format="dimension" /&gt;</span><br><span class="line">        &lt;attr name="child_margin_vertical" format="dimension" /&gt;</span><br><span class="line">        &lt;attr name="child_layout" format="integer" /&gt;</span><br><span class="line">        &lt;attr name="child_count" format="integer" /&gt;</span><br><span class="line">        &lt;attr name="child_values" format="integer" /&gt;</span><br><span class="line">        &lt;attr name="single_choice" format="boolean" /&gt;</span><br><span class="line">        &lt;attr name="gravity" format="integer" /&gt;</span><br><span class="line">    &lt;/declare-styleable&gt;</span><br><span class="line"></span><br><span class="line">    &lt;declare-styleable name="DrawView"&gt;</span><br><span class="line">        &lt;attr name="backgroudColor" format="color" /&gt;</span><br><span class="line">        &lt;attr name="radius" format="dimension"/&gt;</span><br><span class="line">    &lt;/declare-styleable&gt;</span><br><span class="line"></span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>
<p>这里定义了一个颜色属性和一个尺寸属性，在以后的xml里使用这DrawView这个组件时就能使用这两个属性了。这里我们了解了自定义组件的第一步骤。</p>
<hr>
<h3 id="OnMeasure"><a href="#OnMeasure" class="headerlink" title="OnMeasure():"></a>OnMeasure():</h3><p>首先要知道这个OnMeasure方法是干啥的，为什么要重写它。它的作用是控制View在其父容器中显示的大小，重写它是为了定义view在其中的大小。还是从看代码入手：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span>  </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);  </span><br><span class="line">    <span class="keyword">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);  </span><br><span class="line">    <span class="keyword">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);  </span><br><span class="line">    <span class="keyword">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">int</span> width;  </span><br><span class="line">    <span class="keyword">int</span> height;  </span><br><span class="line">  </span><br><span class="line">    ...   </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (widthMode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">        width = widthSize;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">float</span> widthCircle = mRadius * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> desired = (<span class="keyword">int</span>) (getPaddingLeft() + widthCircle + getPaddingRight());</span><br><span class="line">        width = desired;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (heightMode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">        height = heightSize;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">float</span> heightCircle = mRadius * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> desired = (<span class="keyword">int</span>) (getPaddingTop() + heightCircle + getPaddingBottom());</span><br><span class="line">        height = desired;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    ...  </span><br><span class="line">  </span><br><span class="line">    setMeasuredDimension(width, height); </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>首先要先明白是谁调用了onMeasure()这个方法。 调用它的是这个view的父视图。widthMeasureSpec和heightMeasureSpec这两个参数由其父视图viewGroup的layout_height,layout_width，padding以及本身的layout_margin,layout_width,layout_height共同决定（其实还与widght权重有关，但是这个比较复杂这里忽略它）。<br>接着要来说一下widthMeasureSpec的组成结构，它包含了两部分，Mode and Size. 你可以会奇怪为啥一个Int能包含两部分信息。 其实它是一个32位的，高两位用于表示Model，低30位表示Size。 Model由本身view和Viewgroup的layout_width有关，Size与ViewGroup中得Padding,本身的margin,layout_width。<br>先来说说Model，它有三种状态：</p>
<ul>
<li>exactly精确状态01：MeasureSpec.EXACTLY：view就为本身指定的大小，再xml中定义的为MATCH_PARENT时model对应于EXACTLY，即view的大小由于父容器指定，但是自己可以指定与边界的距离。</li>
<li>at_most最大状态00：MeasureSpec.AT_MOST：view的大小不得大于VIewGroup的大小，再xml中定义的为WRAP_CONTENT对应为于AT_MOST，即自己指定的大小。</li>
<li>unspecified为指明状态10:MeasureSpec.UNSPECIFIED： view的大小不受限制，当view设置为制定大小时情况对应这种。<br>(怕自己理解错误舞蹈观众还是贴出源码里的描述：<br>  <dt>UNSPECIFIED</dt><br>  <dd><br>   The parent has not imposed any constraint on the child. It can be whatever size it wants.<br>   <dt>EXACTLY</dt><br>   <dd><br>   The parent has determined an exact size for the child. The child is going to be given those bounds regardless of how big it wants to be.<br>   <dt>AT_MOST</dt><br>   <dd><br>  The child can be as large as it wants up to the specified size.)</dd></dd></dd></li>
</ul>
<p>32位的数字解析出来稍微有点麻烦，所以Google官方也提供了MeasureSpec这个类，它里面封装了由父组件传递给该view的高度和宽度。其中还提供了来获取Model和Size的方法——MeasureSpec.getModel和MeasureSpec.getSize。 <strong>最后注意的是setMeasuredDimension(width,height)这里的高宽才是最后真真的大小</strong>。</p>
<p>在这里顺便提一下一种让listview或者gridview取消滚动栏方法的实现原理<br>makeMeasureSpec这个方法是传入size和model返回一个MeasureSpec值。还记得前面说的吗，高两位是model，低位是size，这里我们把最大的整形右移两位空出model的值，剩下的size部分就是30位的最大值了，即size为最大；然后我们又让model设置为AT_MOST即wrap_content有多大显示多大,这样view的高度就成了view本身有多大就显示多大，就不会出现自带的滚动条了~</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> expandSpec = MeasureSpec.makeMeasureSpec(</span><br><span class="line">            Integer.MAX_VALUE &gt;&gt; <span class="number">2</span>, MeasureSpec.AT_MOST);</span><br><span class="line">    <span class="keyword">super</span>.onMeasure(widthMeasureSpec, expandSpec);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="onLayout"><a href="#onLayout" class="headerlink" title="onLayout():"></a>onLayout():</h3><p>其目的是为了指定视图的显示位置，方法执行的前后顺序是在onMeasure之后，因为视图肯定是只有知道大小的情况下，才能确定怎么摆放。layout()方法接收四个参数，分别代表着左、上、右、下的坐标，当然这个坐标是相对于当前视图的父视图而言的。在view源码里这是个空方法，这是为什么呢？因为onLayout()过程是为了确定视图在布局中所在的位置，而这个操作应该是由布局来完成的，即父视图决定子视图的显示位置。<br>既然如此，我们来看下ViewGroup中的onLayout()方法是怎么写的吧。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span>  </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> l, <span class="keyword">int</span> t, <span class="keyword">int</span> r, <span class="keyword">int</span> b)</span></span>;</span><br></pre></td></tr></table></figure>
<p>可以看到，ViewGroup中的onLayout()方法竟然是一个抽象方法，这就意味着所有ViewGroup的子类都必须重写这个方法。没错，像LinearLayout、RelativeLayout等布局，都是重写了这个方法，然后在内部按照各自的规则对子视图进行布局的.由于LinearLayout和RelativeLayout的布局规则都比较复杂，就不单独拿出来进行分析了，这里我们尝试自定义一个布局，借此来更深刻地理解onLayout()的过程。<br>自定义的这个布局目标很简单，只要能够包含一个子视图，并且让子视图正常显示出来就可以了。那么就给这个布局起名叫做SimpleLayout吧，代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleLayout</span> <span class="keyword">extends</span> <span class="title">ViewGroup</span> </span>&#123;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SimpleLayout</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">super</span>(context, attrs);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="annotation">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);  </span><br><span class="line">        <span class="keyword">if</span> (getChildCount() &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">            View childView = getChildAt(<span class="number">0</span>);  </span><br><span class="line">            measureChild(childView, widthMeasureSpec, heightMeasureSpec);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="annotation">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> l, <span class="keyword">int</span> t, <span class="keyword">int</span> r, <span class="keyword">int</span> b)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">if</span> (getChildCount() &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">            View childView = getChildAt(<span class="number">0</span>);  </span><br><span class="line">            childView.layout(<span class="number">0</span>, <span class="number">0</span>, childView.getMeasuredWidth(), childView.getMeasuredHeight());  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>已经知道，onMeasure()方法会在onLayout()方法之前调用，因此这里在onMeasure()方法中判断SimpleLayout中是否有包含一个子视图，如果有的话就调用measureChild()方法来测量出子视图的大小。<br>接着在onLayout()方法中同样判断SimpleLayout是否有包含一个子视图，然后调用这个子视图的layout()方法来确定它在SimpleLayout布局中的位置，这里传入的四个参数依次是0、0、childView.getMeasuredWidth()和childView.getMeasuredHeight()，分别代表着子视图在SimpleLayout中左上右下四个点的坐标。其中，调用childView.getMeasuredWidth()和childView.getMeasuredHeight()方法得到的值就是在onMeasure()方法中测量出的宽和高。在onLayout()过程结束后，我们就可以调用getWidth()方法和getHeight()方法来获取视图的宽高了</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;com.example.viewtest.SimpleLayout xmlns:android="http://schemas.android.com/apk/res/android"  </span><br><span class="line">    android:layout_width="match_parent"  </span><br><span class="line">    android:layout_height="match_parent" &gt;  </span><br><span class="line">      </span><br><span class="line">    &lt;ImageView   </span><br><span class="line">        android:layout_width="wrap_content"  </span><br><span class="line">        android:layout_height="wrap_content"  </span><br><span class="line">        android:src="@drawable/ic_launcher"  </span><br><span class="line">        /&gt;  </span><br><span class="line">      </span><br><span class="line">&lt;/com.example.viewtest.SimpleLayout&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p>说到这里再来理清一个疑问getWidth()方法和getMeasureWidth()方法到底有什么区别呢？它们的值好像永远都是相同的。其实它们的值之所以会相同基本都是因为布局设计者的编码习惯非常好，实际上它们之间的差别还是挺大的。<br>首先getMeasureWidth()方法在measure()过程结束后就可以获取到了，而getWidth()方法要在layout()过程结束后才能获取到。另外，getMeasureWidth()方法中的值是通过setMeasuredDimension()方法来进行设置的，而getWidth()方法中的值则是通过视图右边的坐标减去左边的坐标计算出来的。<br>观察SimpleLayout中onLayout()方法的代码，这里给子视图的layout()方法传入的四个参数分别是0、0、childView.getMeasuredWidth()和childView.getMeasuredHeight()，因此getWidth()方法得到的值就是childView.getMeasuredWidth() - 0 = childView.getMeasuredWidth() ，所以此时getWidth()方法和getMeasuredWidth() 得到的值就是相同的.但如果你将onLayout()方法中的代码进行如下修改：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span>  </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> l, <span class="keyword">int</span> t, <span class="keyword">int</span> r, <span class="keyword">int</span> b)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span> (getChildCount() &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">        View childView = getChildAt(<span class="number">0</span>);  </span><br><span class="line">        childView.layout(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样getWidth()方法得到的值就是200 - 0 = 200，不会再和getMeasuredWidth()的值相同了。当然这种做法充分不尊重measure()过程计算出的结果，通常情况下是不推荐这么写的</p>
<hr>
<h3 id="OnDraw"><a href="#OnDraw" class="headerlink" title="OnDraw()"></a>OnDraw()</h3><p>measure和layout的过程都结束后，接下来就进入到draw的过程了。同样，根据名字你就能够判断出，在这里才真正地开始对视图进行绘制。其实在view的绘制方法中总共是分6步的，onDraw只是其中的一步，用于绘制内容的。还是贴出来了好了，onDraw实际上是进行的第三步。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">         * Draw traversal performs several drawing steps which must be executed</span><br><span class="line">         * in the appropriate order:</span><br><span class="line">         *</span><br><span class="line">         *      1. Draw the background  绘制背景</span><br><span class="line">         *      2. If necessary, save the canvas' layers to prepare for fading 如有必要，颜色渐变淡之前保存画布层(即锁定原有的画布内容)</span><br><span class="line">         *      3. Draw view's content 绘制绘制自身</span><br><span class="line">         *      4. Draw children 绘制子view，只有在viewGroup中</span><br><span class="line">         *      5. If necessary, draw the fading edges and restore layers 如有必要，绘制颜色渐变淡的边框，并恢复画布(即画布改变的内容附加到原有内容上)</span><br><span class="line">         *      6. Draw decorations (scrollbars for instance)</span><br><span class="line">         *      绘制装饰，比如滚动条</span><br><span class="line">         */</span></span><br></pre></td></tr></table></figure>
<p>重写ondraw()方法，在这里面绘制了两个圆</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onDraw(canvas);</span><br><span class="line">    mPaint.setColor(backgroundColor);</span><br><span class="line">    canvas.drawCircle(mRadius, mRadius, mRadius, mPaint);</span><br><span class="line"></span><br><span class="line">    Paint mPaint2 = <span class="keyword">new</span> Paint();</span><br><span class="line">    sRadius=mRadius/<span class="number">4</span>;</span><br><span class="line">    mPaint2.setColor(Color.BLACK);</span><br><span class="line">    <span class="keyword">if</span>(firstLoading)&#123;</span><br><span class="line">        canvas.drawCircle(mRadius-deltaX , mRadius-deltaY, sRadius, mPaint2);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        canvas.drawCircle(deltaX, deltaY, sRadius, mPaint2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后附上一个自定义的view完整代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DrawView</span> <span class="keyword">extends</span> <span class="title">View</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> backgroundColor;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mRadius;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sRadius;</span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> deltaX;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> deltaY;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> width;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> height;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> firstLoading=<span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DrawView</span><span class="params">(Context context, AttributeSet attrs)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DrawView</span><span class="params">(Context context)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DrawView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init(context, attrs, defStyleAttr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyle)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span><br><span class="line">         * 获得我们所定义的自定义样式属性</span><br><span class="line">         */</span></span><br><span class="line">        TypedArray typedArray = context.getTheme().obtainStyledAttributes(attrs, R.styleable.DrawView, defStyle, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> n = typedArray.getIndexCount();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> attr = typedArray.getIndex(i);</span><br><span class="line">            <span class="keyword">switch</span> (attr)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> R.styleable.DrawView_backgroudColor:</span><br><span class="line">                    backgroundColor = typedArray.getColor(attr, Color.BLACK);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.styleable.DrawView_radius:</span><br><span class="line">                    mRadius= typedArray.getDimensionPixelSize(attr, (<span class="keyword">int</span>) TypedValue.applyDimension(</span><br><span class="line">                            TypedValue.COMPLEX_UNIT_DIP, <span class="number">16</span>, getResources().getDisplayMetrics()));</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        typedArray.recycle();</span><br><span class="line"></span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint(Paint.ANTI_ALIAS_FLAG);</span><br><span class="line">        mPaint.setColor(Color.BLACK);</span><br><span class="line">        setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDraw(canvas);</span><br><span class="line">        mPaint.setColor(backgroundColor);</span><br><span class="line">        canvas.drawCircle(mRadius, mRadius, mRadius, mPaint);</span><br><span class="line"></span><br><span class="line">        Paint mPaint2 = <span class="keyword">new</span> Paint();</span><br><span class="line">        sRadius=mRadius/<span class="number">4</span>;</span><br><span class="line">        mPaint2.setColor(Color.BLACK);</span><br><span class="line">        <span class="keyword">if</span>(firstLoading)&#123;</span><br><span class="line">            canvas.drawCircle(mRadius-deltaX , mRadius-deltaY, sRadius, mPaint2);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            canvas.drawCircle(deltaX, deltaY, sRadius, mPaint2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    protected void dispatchDraw(Canvas canvas) &#123;</span></span><br><span class="line"><span class="comment">//        super.dispatchDraw(canvas);</span></span><br><span class="line"><span class="comment">//        Paint mPaint2 = new Paint();</span></span><br><span class="line"><span class="comment">//        mPaint2.setColor(Color.BLACK);</span></span><br><span class="line"><span class="comment">//        if(firstLoading)&#123;</span></span><br><span class="line"><span class="comment">//            canvas.drawCircle(mRadius-deltaX , mRadius-deltaY, mRadius / 4, mPaint2);</span></span><br><span class="line"><span class="comment">//        &#125;else &#123;</span></span><br><span class="line"><span class="comment">//            if(deltaX&gt;0&amp;&amp;deltaY&gt;0&amp;&amp;deltaX&lt;width&amp;&amp;deltaY&lt;height) &#123;</span></span><br><span class="line"><span class="comment">//                canvas.drawCircle(deltaX, deltaY, mRadius / 4, mPaint2);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">        <span class="keyword">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);</span><br><span class="line">        <span class="keyword">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);</span><br><span class="line">        <span class="keyword">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);</span><br><span class="line">        <span class="keyword">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec);</span><br><span class="line">        <span class="keyword">if</span> (widthMode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">            width = widthSize;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">float</span> widthCircle = mRadius * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> desired = (<span class="keyword">int</span>) (getPaddingLeft() + widthCircle + getPaddingRight());</span><br><span class="line">            width = desired;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (heightMode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">            height = heightSize;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">float</span> heightCircle = mRadius * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> desired = (<span class="keyword">int</span>) (getPaddingTop() + heightCircle + getPaddingBottom());</span><br><span class="line">            height = desired;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        setMeasuredDimension(width, height);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> action = event.getAction();</span><br><span class="line">        firstLoading=<span class="keyword">false</span>;</span><br><span class="line">        deltaX = event.getX()&gt;sRadius/<span class="number">2</span>?event.getX():<span class="number">0</span>;</span><br><span class="line">        deltaY = event.getY()&gt;sRadius/<span class="number">2</span>?event.getY():<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">switch</span>(action) &#123;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">                Log.e(<span class="string">"deltaX"</span>,String.valueOf(deltaX));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        invalidate();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        Log.e(<span class="string">"222"</span>,<span class="string">"f反反复复"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//get and set method</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getmRadius</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mRadius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setmRadius</span><span class="params">(<span class="keyword">int</span> mRadius)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mRadius = mRadius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBackgroundColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> backgroundColor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBackgroundColor</span><span class="params">(<span class="keyword">int</span> backgroundColor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.backgroundColor = backgroundColor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/02/17/Android-Custom-View/" data-id="cikqt011u000080ufh8dehxqo" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/02/17/Difference-from-dp-dip-px-sp/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Difference from dp dip px sp
        
      </div>
    </a>
  
  
    <a href="/2016/02/17/Otto/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Otto</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">9</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/02/17/Android-Material-Design-component/">Android Material Design component</a>
          </li>
        
          <li>
            <a href="/2016/02/17/Android-图片压缩/">Android 图片压缩</a>
          </li>
        
          <li>
            <a href="/2016/02/17/html-and-css/">html_and_css</a>
          </li>
        
          <li>
            <a href="/2016/02/17/Android—stickHeaderDecorate/">Android—stickHeaderDecorate</a>
          </li>
        
          <li>
            <a href="/2016/02/17/Dagger2/">Dagger2</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 WeiqiLiu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>